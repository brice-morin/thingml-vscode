{
    "$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
    "name": "thingml",
    "scopeName": "text.thingml",
    "fileTypes": [
        "thingml"
    ],
    "repository": {
        "general": {
            "patterns": [
                {
                    "include": "#linecomment"
                },
                {
                    "include": "#blockcomment"
                },
                {
                    "include": "#structure"
                },
                {
                    "include": "#action"
                },
                {
                    "include": "#sendaction"
                },
                {
                    "include": "#event"
                },
                {
                    "include": "#states"
                },
                {
                    "include": "#configuration"
                },
                {
                    "include": "#extern"
                },
                {
                    "include": "#annot"
                },
                {
                    "include": "#string"
                },
                {
                    "include": "#char"
                },
                {
                    "include": "#number"
                },
                {
                    "include": "#boolean"
                },
                {
                    "include": "#types"
                }
            ]
        },
        "linecomment": {
            "name": "comment.line.double-slash",
            "begin": "(^[ \\t]+)?(?=//)",
            "end": "(?=$)"
        },
        "blockcomment": {
            "name": "comment.block",
            "begin": "/\\*(\\*)?(?!/)",
            "end": "\\*/"
        },
        "extern": {
            "name": "string.quoted.other",
            "begin": "`",
            "end": "`"
        },
        "string": {
            "name": "constant.numeric",
            "begin": "\"",
            "end": "\""
        },
        "char": {
            "name": "constant.numeric",
            "begin": "'",
            "end": "'"
        },
        "number": {
            "name": "constant.numeric",
            "match": "\\b\\d+(.\\d+)?\\b"
        },
        "boolean": {
            "name": "constant.numeric",
            "match": "(true|false)"
        },
        "annot": {
            "name": "support.type.property-name",
            "begin": "@",
            "end": "\\s+"
        },
        "structure": {
            "name": "storage.type.class",
            "match": "\\b(?i)(thing|fragment|message|sends|receives|property|readonly property|datatype|object|enumeration|includes|port|provided|required|internal port)\\b"
        },
        "action": {
            "name": "keyword.control",
            "match": "\\b(?i)(import|from|if|then|while|and|or|not|var|readonly var|as|print|println|error|errorln|fork|return)\\b"
        },
        "sendaction": {
            "name": "keyword.control",
            "match": "\\w*(!)\\w*"
        },
        "event": {
            "name": "keyword.control",
            "match": "\\w*(\\?)\\w*"
        },
        "states": {
            "name": "storage.type.function",
            "match": "\\b(?i)(statechart|composite|state|final|event|transition|internal|guard|action|on entry|on exit|init|keeps|history|region|session|function|do|end|abstract)\\b"
        },
        
        "types": {
            "name": "support.type.property-name",
            "match": "\\b(?i)(Byte|Char|Integer|Boolean|Int8|UInt8|Int16|UInt16|Int32|UInt32|Long|Int64|UInt64|Float|Double|String|DigitalState)\\b"
        },
        "configuration": {
            "name": "storage.type",
            "match": "\\b(?i)(configuration|instance|connector|external|set)\\b"
        }
    },
    "patterns": [
        {
            "include": "#general"
        }
    ]
}
